<!DOCTYPE html>

<head>
  <title>hls.js metrics page</title>
</head>
<body>
  <div class="header-container">
    <header class="wrapper clearfix">
      <h1 class="title">hls.js metrics page</h1>
    </header>
  </div>
    <canvas id="buffered_c" width="640" height="15" onclick="buffered_seek(event)";></canvas> <br>
    <button onclick="timeRangeSetSliding(2000);">window=2s</button>
    <button onclick="timeRangeSetSliding(5000)">=5s</button>
    <button onclick="timeRangeSetSliding(10000)">=10s</button>
    <button onclick="timeRangeSetSliding(20000)">=20s</button>
    <button onclick="timeRangeSetSliding(30000)">=30s</button>
    <button onclick="timeRangeSetSliding(60000)">=60s</button>
    <button onclick="timeRangeSetSliding(120000)">=120s</button>
    <button onclick="timeRangeSetSliding(0)">=infinity</button><br>
    <button onclick="timeRangeZoomIn()">Zoom In</button>
    <button onclick="timeRangeZoomOut()">Zoom Out</button><br>
    <button onclick="timeRangeSlideLeft()"> <<< Slide </button>
    <button onclick="timeRangeSlideRight()">Slide >>> </button><br>
    <button onclick="windowSliding=!windowSliding; refreshCanvas()">toggle sliding/fixed window</button><br>
    <button onclick="windowStart=document.getElementById('windowStart').value;refreshCanvas();">fixed window start(ms)</button>
    <input type="text" id='windowStart' defaultValue="0" onkeydown="if(window.event.keyCode=='13'){windowStart=document.getElementById('windowStart').value;refreshCanvas();}">
    <button onclick="windowEnd=document.getElementById('windowEnd').value;refreshCanvas();">fixed window end(ms)</button>
    <input type="text" id='windowEnd' defaultValue="10000" onkeydown="if(window.event.keyCode=='13'){windowEnd=document.getElementById('windowEnd').value;refreshCanvas();}"><br>
    <canvas id="bufferTimerange_c" width="640" height="60" style="border:1px solid #000000" onmousedown="timeRangeCanvasonMouseDown(event)" onmousemove="timeRangeCanvasonMouseMove(event)" onmouseup="timeRangeCanvasonMouseUp(event)" onmouseout="timeRangeCanvasonMouseOut(event)";></canvas>
    <canvas id="positionTimerange_c" width="640" height="60" style="border:1px solid #000000" onmousedown="timeRangeCanvasonMouseDown(event)" onmousemove="timeRangeCanvasonMouseMove(event)" onmouseup="timeRangeCanvasonMouseUp(event)" onmouseout="timeRangeCanvasonMouseOut(event)";></canvas>
    <canvas id="bufferWindow_c" width="640" height="80" style="border:1px solid #000000";></canvas>
    <canvas id="positionWindow_c" width="640" height="80" style="border:1px solid #000000";></canvas>
    <canvas id="videoEvent_c" width="640" height="15" style="border:1px solid #000000";></canvas>
    <canvas id="loadEvent_c" width="640" height="15" style="border:1px solid #000000";></canvas><br>

  <script src="canvas.js"></script>
  <script src="metrics.js"></script>
  <script src="jsonpack.js"></script>
  <script>

  console.log(jsonpack.unpack(atob(decodeURIComponent(location.search.split('data=')[1]))));

  var events = jsonpack.unpack(atob(decodeURIComponent(location.search.split('data=')[1])));
  showMetrics();
  refreshCanvas();
  </script>


</body>
