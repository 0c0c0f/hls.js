{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 43ec8408a75774c45f16","webpack:///./demo/index.js"],"names":["$","document","ready","console","log","change","val","loadStream","width","hide","toggle","windowSliding","click","enableStreaming","checked","autoRecoverError","updatePermalink","enableWorker","dumpfMP4","levelCapping","value","defaultAudioCodec","prop","append","Hls","version","hls","events","stats","tracks","fmp4Data","JSON","parse","getURLParam","undefined","video","volume","html","decodeURIComponent","url","hideCanvas","isSupported","destroy","bufferTimer","clearInterval","text","t0","performance","now","load","buffer","level","bitrate","recoverDecodingErrorDate","recoverSwapAudioCodecDate","debug","loadSource","autoLevelCapping","attachMedia","on","Events","MEDIA_ATTACHED","bufferingIdx","push","time","type","MEDIA_DETACHED","FRAG_PARSING_INIT_SEGMENT","event","data","showCanvas","id","FRAG_PARSING_METADATA","LEVEL_SWITCHING","Math","round","levels","updateLevelInfo","MANIFEST_PARSED","name","start","end","length","trequest","latency","tfirst","tload","duration","refreshCanvas","levelNb","levelParsed","AUDIO_TRACKS_UPDATED","audioTracks","updateAudioTrackInfo","AUDIO_TRACK_SWITCHING","lastAudioTrackSwitchingIdx","AUDIO_TRACK_SWITCHED","LEVEL_LOADED","isLive","details","live","startSN","endSN","parsing","tparsed","parsingDuration","sumLevelParsingMs","levelParsingUs","AUDIO_TRACK_LOADED","FRAG_BUFFERED","frag","id2","sn","tbuffered","bw","total","size","pos","window","setInterval","checkBuffer","process","fragBuffered","fragMinLatency","min","fragMaxLatency","max","fragMinProcess","fragMaxProcess","fragMinKbps","fragMaxKbps","autoLevelCappingMin","autoLevelCappingMax","fragBufferedBytes","sumLatency","sumKbps","sumProcess","sumParsing","fraglastLatency","fragAvgLatency","fragLastProcess","fragAvgProcess","fragLastKbps","fragAvgKbps","fragparsingKbps","fragparsingMs","autoLevelCappingLast","LEVEL_SWITCHED","FRAG_CHANGED","tagList","autoLevel","levelStart","fragChangedAuto","autoLevelMin","autoLevelMax","levelLastAuto","autoLevelLast","autoLevelSwitch","sumAutoLevel","autoLevelAvg","fragChangedManual","manualLevelMin","manualLevelMax","manualLevelLast","manualLevelSwitch","FRAG_LOAD_EMERGENCY_ABORTED","fragLoadEmergencyAborted","FRAG_DECRYPTED","fragDecrypted","totalDecryptTime","fragAvgDecryptTime","tdecrypt","tstart","ERROR","warn","ErrorDetails","MANIFEST_LOAD_ERROR","context","response","code","err","MANIFEST_LOAD_TIMEOUT","MANIFEST_PARSING_ERROR","reason","LEVEL_LOAD_ERROR","LEVEL_LOAD_TIMEOUT","LEVEL_SWITCH_ERROR","FRAG_LOAD_ERROR","FRAG_LOAD_TIMEOUT","FRAG_LOOP_LOADING_ERROR","FRAG_DECRYPT_ERROR","FRAG_PARSING_ERROR","KEY_LOAD_ERROR","decryptdata","uri","KEY_LOAD_TIMEOUT","BUFFER_APPEND_ERROR","BUFFER_ADD_CODEC_ERROR","mimeType","message","BUFFER_APPENDING_ERROR","fatal","ErrorTypes","MEDIA_ERROR","handleMediaError","NETWORK_ERROR","fatalError","stringify","sortObject","BUFFER_CREATED","BUFFER_APPENDING","FPS_DROP","evt","currentDropped","currentDecoded","fpsDropEvent","fpsTotalDroppedFrames","totalDroppedFrames","addEventListener","handleVideoEvent","navigator","userAgent","toLowerCase","indexOf","lastSeekingIdx","lastStartPosition","lastDuration","target","videoWidth","videoHeight","currentTime","errorTxt","mediaError","currentTarget","error","MEDIA_ERR_ABORTED","MEDIA_ERR_DECODE","MEDIA_ERR_NETWORK","MEDIA_ERR_SRC_NOT_SUPPORTED","recoverMediaError","swapAudioCodec","timeRangesToString","r","i","v","canvas","ctx","getContext","buffered","bufferingDuration","fillStyle","fillRect","height","clientWidth","bufferLen","paused","bufEvents","bufEventLen","event0","event1","slopeBuf0","slopeBuf1","slopePos0","slopePos1","abs","pop","seekable","played","media","videoPlaybackQuality","getVideoPlaybackQuality","Function","droppedVideoFrames","corruptedVideoFrames","webkitDroppedFrameCount","x","obj","temp","keys","key","sort","index","showMetrics","show","hideMetrics","getMetrics","json","jsonpacked","jsonpack","pack","btoa","copyMetricsToClipBoard","copyTextToClipboard","textArea","createElement","body","appendChild","select","successful","execCommand","msg","removeChild","goToMetrics","URL","substr","lastIndexOf","open","goToMetricsPermaLink","b64","minsecs","ts","m","floor","s","buffered_seek","clientX","offsetLeft","button_template","button_enabled","button_disabled","html1","autoLevelEnabled","html2","html3","html4","currentLevel","levelName","label","level2label","loadLevel","nextLevel","audioTrackId","audioTrack","len","sParam","defaultValue","sPageURL","location","search","substring","sURLVariables","split","sParameterName","hlsLink","encodeURIComponent","description","createfMP4","blob","Blob","arrayConcat","filename","Date","toISOString","saveAs","inputArray","totalLength","reduce","prev","cur","result","Uint8Array","offset","forEach","element","set"],"mappings":"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","file":"hls-demo.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"HlsDemo\"] = factory();\n\telse\n\t\troot[\"HlsDemo\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 43ec8408a75774c45f16","  $(document).ready(function() {\n\nconsole.log('ready')\n\n    $('#streamSelect').change(function() {\n      $('#streamURL').val($('#streamSelect').val());\n      loadStream($('#streamURL').val());\n    });\n    $('#streamURL').change(function() {\n      loadStream($('#streamURL').val());\n    });\n    $('#videoSize').change(function() {\n      $('#video').width($('#videoSize').val());\n      $('#buffered_c').width($('#videoSize').val());\n    });\n    $(\"#PlaybackControl\").hide();\n    $(\"#QualityLevelControl\").hide();\n    $(\"#AudioTrackControl\").hide();\n    $(\"#MetricsDisplay\").hide();\n    $(\"#StatsDisplay\").hide();\n    $('#metricsButtonWindow').toggle(windowSliding);\n    $('#metricsButtonFixed').toggle(!windowSliding);\n    $('#enableStreaming').click(function() {\n      enableStreaming = this.checked;\n      loadStream($('#streamURL').val());\n    });\n    $('#autoRecoverError').click(function() {\n      autoRecoverError = this.checked;\n      updatePermalink();\n    });\n    $('#enableWorker').click(function() {\n      enableWorker = this.checked;\n      updatePermalink();\n    });\n    $('#dumpfMP4').click(function() {\n      dumpfMP4 = this.checked;\n      updatePermalink();\n    });\n    $('#levelCapping').change(function() {\n      levelCapping = this.value;\n      updatePermalink();\n    });\n    $('#defaultAudioCodec').change(function() {\n      defaultAudioCodec = this.value;\n      updatePermalink();\n    });\n    $('#enableStreaming').prop( \"checked\", enableStreaming );\n    $('#autoRecoverError').prop( \"checked\", autoRecoverError );\n    $('#enableWorker').prop( \"checked\", enableWorker );\n    $('#dumpfMP4').prop( \"checked\", dumpfMP4 );\n    $('#levelCapping').val(levelCapping);\n    $('#defaultAudioCodec').val(defaultAudioCodec || \"undefined\");\n    $('h2').append(' <a target=_blank href=https://github.com/video-dev/hls.js/releases/tag/v' + Hls.version + '>v' + Hls.version + '</a>');\n\n  });\n\n  var hls,events, stats,tracks,fmp4Data,\n      enableStreaming = JSON.parse(getURLParam('enableStreaming',true))\n      autoRecoverError = JSON.parse(getURLParam('autoRecoverError',true)),\n      enableWorker = JSON.parse(getURLParam('enableWorker',true)),\n      levelCapping = JSON.parse(getURLParam('levelCapping',-1)),\n      defaultAudioCodec = getURLParam('defaultAudioCodec',undefined),\n      dumpfMP4 = getURLParam('dumpfMP4',false);\n  var video = $('#video')[0];\n  video.volume = 0.05;\n  $(\"#currentVersion\").html(\"Hls version:\" + Hls.version);\n\n  loadStream(decodeURIComponent(getURLParam('src','https://video-dev.github.io/streams/x36xhzz/x36xhzz.m3u8')));\n\n  function loadStream(url) {\n    hideCanvas();\n     if(Hls.isSupported()) {\n       if(hls) {\n         hls.destroy();\n         if(hls.bufferTimer) {\n            clearInterval(hls.bufferTimer);\n           hls.bufferTimer = undefined;\n         }\n         hls = null;\n       }\n\n      $('#streamURL').val(url);\n      updatePermalink();\n      if(!enableStreaming) {\n        $(\"#HlsStatus\").text(\"Streaming disabled\");\n        return;\n      }\n\n      $(\"#HlsStatus\").text('loading ' + url);\n       events = { url : url, t0 : performance.now(), load : [], buffer : [], video : [], level : [], bitrate : []};\n       recoverDecodingErrorDate = recoverSwapAudioCodecDate = null;\n       fmp4Data = { 'audio': [], 'video': [] };\n       hls = new Hls({debug:true, enableWorker : enableWorker, defaultAudioCodec : defaultAudioCodec});\n       $(\"#HlsStatus\").text('loading manifest and attaching video element...');\n       hls.loadSource(url);\n       hls.autoLevelCapping = levelCapping;\n       hls.attachMedia(video);\n       hls.on(Hls.Events.MEDIA_ATTACHED,function() {\n        $(\"#HlsStatus\").text('MediaSource attached...');\n          bufferingIdx = -1;\n          events.video.push({time : performance.now() - events.t0, type : \"Media attached\"});\n       });\n       hls.on(Hls.Events.MEDIA_DETACHED,function() {\n        $(\"#HlsStatus\").text('MediaSource detached...');\n          bufferingIdx = -1;\n          tracks = [];\n          events.video.push({time : performance.now() - events.t0, type : \"Media detached\"});\n       });\n       hls.on(Hls.Events.FRAG_PARSING_INIT_SEGMENT,function(event,data) {\n          showCanvas();\n          var event = {time : performance.now() - events.t0, type : data.id + \" init segment\"};\n          events.video.push(event);\n       });\n       hls.on(Hls.Events.FRAG_PARSING_METADATA, function(event, data) {\n         //console.log(\"Id3 samples \", data.samples);\n       });\n       hls.on(Hls.Events.LEVEL_SWITCHING,function(event,data) {\n          events.level.push({time : performance.now() - events.t0, id : data.level, bitrate : Math.round(hls.levels[data.level].bitrate/1000)});\n          updateLevelInfo();\n       });\n       hls.on(Hls.Events.MANIFEST_PARSED,function(event,data) {\n          var event = {\n            type : \"manifest\",\n            name : \"\",\n            start : 0,\n            end : data.levels.length,\n            time : data.stats.trequest - events.t0,\n            latency : data.stats.tfirst - data.stats.trequest,\n            load : data.stats.tload - data.stats.tfirst,\n            duration : data.stats.tload - data.stats.tfirst,\n          };\n          events.load.push(event);\n          refreshCanvas();\n       });\n       hls.on(Hls.Events.MANIFEST_PARSED,function(event,data) {\n         $(\"#HlsStatus\").text(\"manifest successfully loaded,\" + hls.levels.length + \" levels found\");\n         stats = {levelNb: data.levels.length, levelParsed : 0};\n         updateLevelInfo();\n       });\n       hls.on(Hls.Events.AUDIO_TRACKS_UPDATED,function(event,data) {\n          $(\"#HlsStatus\").text(data.audioTracks.length + \" audio tracks found\");\n          updateAudioTrackInfo();\n       });\n       hls.on(Hls.Events.AUDIO_TRACK_SWITCHING,function(event,data) {\n          updateAudioTrackInfo();\n        var event = {time : performance.now() - events.t0, type : 'audio switching', name : '@' + data.id };\n        events.video.push(event);\n        lastAudioTrackSwitchingIdx = events.video.length-1;\n       });\n       hls.on(Hls.Events.AUDIO_TRACK_SWITCHED,function(event,data) {\n          updateAudioTrackInfo();\n        var event = {time : performance.now() - events.t0, type : 'audio switched', name : '@' + data.id };\n        if (lastAudioTrackSwitchingIdx !== undefined) {\n          events.video[lastAudioTrackSwitchingIdx].duration = event.time - events.video[lastAudioTrackSwitchingIdx].time;\n          lastAudioTrackSwitchingIdx = undefined;\n        }\n        events.video.push(event);\n       });\n       hls.on(Hls.Events.LEVEL_LOADED,function(event,data) {\n          events.isLive = data.details.live;\n          var event = {\n            type : \"level\",\n            id : data.level,\n            start : data.details.startSN,\n            end : data.details.endSN,\n            time : data.stats.trequest - events.t0,\n            latency : data.stats.tfirst - data.stats.trequest,\n            load : data.stats.tload - data.stats.tfirst,\n            parsing : data.stats.tparsed - data.stats.tload,\n            duration : data.stats.tload - data.stats.tfirst\n          };\n          const parsingDuration = data.stats.tparsed - data.stats.tload;\n          if (stats.levelParsed) {\n            this.sumLevelParsingMs += parsingDuration;\n          } else {\n            this.sumLevelParsingMs = parsingDuration;\n          }\n          stats.levelParsed++;\n          stats.levelParsingUs = Math.round(1000*this.sumLevelParsingMs / stats.levelParsed);\n          console.log(\"parsing level duration :\" + stats.levelParsingUs + \"us,count:\" + stats.levelParsed);\n          events.load.push(event);\n          refreshCanvas();\n       });\n       hls.on(Hls.Events.AUDIO_TRACK_LOADED,function(event,data) {\n          events.isLive = data.details.live;\n          var event = {\n            type : \"audio track\",\n            id : data.id,\n            start : data.details.startSN,\n            end : data.details.endSN,\n            time : data.stats.trequest - events.t0,\n            latency : data.stats.tfirst - data.stats.trequest,\n            load : data.stats.tload - data.stats.tfirst,\n            parsing : data.stats.tparsed - data.stats.tload,\n            duration : data.stats.tload - data.stats.tfirst\n          };\n          events.load.push(event);\n          refreshCanvas();\n       });\n       hls.on(Hls.Events.FRAG_BUFFERED,function(event,data) {\n          var event = {\n            type : data.frag.type + \" fragment\",\n            id : data.frag.level,\n            id2 : data.frag.sn,\n            time : data.stats.trequest - events.t0,\n            latency : data.stats.tfirst - data.stats.trequest,\n            load : data.stats.tload - data.stats.tfirst,\n            parsing : data.stats.tparsed - data.stats.tload,\n            buffer : data.stats.tbuffered - data.stats.tparsed,\n            duration : data.stats.tbuffered - data.stats.tfirst,\n            bw : Math.round(8*data.stats.total/(data.stats.tbuffered - data.stats.trequest)),\n            size : data.stats.total\n          };\n          events.load.push(event);\n          events.bitrate.push({time : performance.now() - events.t0, bitrate : event.bw , duration : data.frag.duration, level : event.id});\n          if(hls.bufferTimer === undefined) {\n            events.buffer.push({ time : 0, buffer : 0, pos: 0});\n            hls.bufferTimer = window.setInterval(checkBuffer, 100);\n          }\n          refreshCanvas();\n          updateLevelInfo();\n\n          var latency = data.stats.tfirst - data.stats.trequest,\n              parsing = data.stats.tparsed - data.stats.tload,\n              process = data.stats.tbuffered - data.stats.trequest,\n              bitrate = Math.round(8 * data.stats.length / (data.stats.tbuffered - data.stats.tfirst));\n          if (stats.fragBuffered) {\n            stats.fragMinLatency = Math.min(stats.fragMinLatency, latency);\n            stats.fragMaxLatency = Math.max(stats.fragMaxLatency, latency);\n            stats.fragMinProcess = Math.min(stats.fragMinProcess, process);\n            stats.fragMaxProcess = Math.max(stats.fragMaxProcess, process);\n            stats.fragMinKbps = Math.min(stats.fragMinKbps, bitrate);\n            stats.fragMaxKbps = Math.max(stats.fragMaxKbps, bitrate);\n            stats.autoLevelCappingMin = Math.min(stats.autoLevelCappingMin, hls.autoLevelCapping);\n            stats.autoLevelCappingMax = Math.max(stats.autoLevelCappingMax, hls.autoLevelCapping);\n            stats.fragBuffered++;\n          } else {\n            stats.fragMinLatency = stats.fragMaxLatency = latency;\n            stats.fragMinProcess = stats.fragMaxProcess = process;\n            stats.fragMinKbps = stats.fragMaxKbps = bitrate;\n            stats.fragBuffered = 1;\n            stats.fragBufferedBytes = 0;\n            stats.autoLevelCappingMin = stats.autoLevelCappingMax = hls.autoLevelCapping;\n            this.sumLatency = 0;\n            this.sumKbps = 0;\n            this.sumProcess = 0;\n            this.sumParsing = 0;\n          }\n          stats.fraglastLatency = latency;\n          this.sumLatency += latency;\n          stats.fragAvgLatency = Math.round(this.sumLatency / stats.fragBuffered);\n          stats.fragLastProcess = process;\n          this.sumProcess += process;\n          this.sumParsing += parsing;\n          stats.fragAvgProcess = Math.round(this.sumProcess / stats.fragBuffered);\n          stats.fragLastKbps = bitrate;\n          this.sumKbps += bitrate;\n          stats.fragAvgKbps = Math.round(this.sumKbps / stats.fragBuffered);\n          stats.fragBufferedBytes += data.stats.total;\n          stats.fragparsingKbps = Math.round(8*stats.fragBufferedBytes / this.sumParsing);\n          stats.fragparsingMs = Math.round(this.sumParsing);\n          stats.autoLevelCappingLast = hls.autoLevelCapping;\n       });\n       hls.on(Hls.Events.LEVEL_SWITCHED,function(event,data) {\n        var event = {time : performance.now() - events.t0, type : 'level switched', name : data.level };\n        events.video.push(event);\n        refreshCanvas();\n        updateLevelInfo();\n      });\n       hls.on(Hls.Events.FRAG_CHANGED,function(event,data) {\n        var event = {time : performance.now() - events.t0, type : 'frag changed', name : data.frag.sn + ' @ ' + data.frag.level };\n        events.video.push(event);\n        refreshCanvas();\n        updateLevelInfo();\n        stats.tagList = data.frag.tagList;\n\n        var level = data.frag.level, autoLevel = data.frag.autoLevel;\n        if (stats.levelStart === undefined) {\n          stats.levelStart = level;\n        }\n        if (autoLevel) {\n          if (stats.fragChangedAuto) {\n            stats.autoLevelMin = Math.min(stats.autoLevelMin, level);\n            stats.autoLevelMax = Math.max(stats.autoLevelMax, level);\n            stats.fragChangedAuto++;\n            if (this.levelLastAuto && level !== stats.autoLevelLast) {\n              stats.autoLevelSwitch++;\n            }\n          } else {\n            stats.autoLevelMin = stats.autoLevelMax = level;\n            stats.autoLevelSwitch = 0;\n            stats.fragChangedAuto = 1;\n            this.sumAutoLevel = 0;\n          }\n          this.sumAutoLevel += level;\n          stats.autoLevelAvg = Math.round(1000 * this.sumAutoLevel / stats.fragChangedAuto) / 1000;\n          stats.autoLevelLast = level;\n        } else {\n          if (stats.fragChangedManual) {\n            stats.manualLevelMin = Math.min(stats.manualLevelMin, level);\n            stats.manualLevelMax = Math.max(stats.manualLevelMax, level);\n            stats.fragChangedManual++;\n            if (!this.levelLastAuto && level !== stats.manualLevelLast) {\n              stats.manualLevelSwitch++;\n            }\n          } else {\n            stats.manualLevelMin = stats.manualLevelMax = level;\n            stats.manualLevelSwitch = 0;\n            stats.fragChangedManual = 1;\n          }\n          stats.manualLevelLast = level;\n        }\n        this.levelLastAuto = autoLevel;\n       });\n\n       hls.on(Hls.Events.FRAG_LOAD_EMERGENCY_ABORTED,function(event,data) {\n        if (stats) {\n          if (stats.fragLoadEmergencyAborted === undefined) {\n            stats.fragLoadEmergencyAborted = 1;\n          } else {\n            stats.fragLoadEmergencyAborted++;\n          }\n        }\n       });\n\n       hls.on(Hls.Events.FRAG_DECRYPTED,function(event,data) {\n         if (!stats.fragDecrypted) {\n           stats.fragDecrypted = 0;\n           this.totalDecryptTime = 0;\n           stats.fragAvgDecryptTime = 0;\n         }\n         stats.fragDecrypted++;\n         this.totalDecryptTime += data.stats.tdecrypt - data.stats.tstart;\n         stats.fragAvgDecryptTime = this.totalDecryptTime / stats.fragDecrypted;\n       });\n\n       hls.on(Hls.Events.ERROR, function(event,data) {\n        console.warn(data);\n        switch(data.details) {\n          case Hls.ErrorDetails.MANIFEST_LOAD_ERROR:\n            try {\n              $(\"#HlsStatus\").html(\"cannot Load <a href=\\\"\" + data.context.url + \"\\\">\" + url + \"</a><br>HTTP response code:\" + data.response.code + \" <br>\" + data.response.text);\n                if(data.response.code === 0) {\n                  $(\"#HlsStatus\").append(\"this might be a CORS issue, consider installing <a href=\\\"https://chrome.google.com/webstore/detail/allow-control-allow-origi/nlfbmbojpeacfghkpbjhddihlkkiljbi\\\">Allow-Control-Allow-Origin</a> Chrome Extension\");\n                }\n            } catch(err) {\n              $(\"#HlsStatus\").html(\"cannot Load <a href=\\\"\" + data.context.url + \"\\\">\" + url + \"</a><br>Reason:Load \" + data.response.text);\n            }\n            break;\n          case Hls.ErrorDetails.MANIFEST_LOAD_TIMEOUT:\n            $(\"#HlsStatus\").text(\"timeout while loading manifest\");\n            break;\n          case Hls.ErrorDetails.MANIFEST_PARSING_ERROR:\n            $(\"#HlsStatus\").text(\"error while parsing manifest:\" + data.reason);\n            break;\n          case Hls.ErrorDetails.LEVEL_LOAD_ERROR:\n            $(\"#HlsStatus\").text(\"error while loading level playlist\");\n            break;\n          case Hls.ErrorDetails.LEVEL_LOAD_TIMEOUT:\n            $(\"#HlsStatus\").text(\"timeout while loading level playlist\");\n            break;\n          case Hls.ErrorDetails.LEVEL_SWITCH_ERROR:\n            $(\"#HlsStatus\").text(\"error while trying to switch to level \" + data.level);\n            break;\n          case Hls.ErrorDetails.FRAG_LOAD_ERROR:\n            $(\"#HlsStatus\").text(\"error while loading fragment \" + data.frag.url);\n            break;\n          case Hls.ErrorDetails.FRAG_LOAD_TIMEOUT:\n            $(\"#HlsStatus\").text(\"timeout while loading fragment \" + data.frag.url);\n            break;\n          case Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR:\n            $(\"#HlsStatus\").text(\"Frag Loop Loading Error\");\n            break;\n          case Hls.ErrorDetails.FRAG_DECRYPT_ERROR:\n            $(\"#HlsStatus\").text(\"Decrypting Error:\" + data.reason);\n            break;\n          case Hls.ErrorDetails.FRAG_PARSING_ERROR:\n            $(\"#HlsStatus\").text(\"Parsing Error:\" + data.reason);\n            break;\n          case Hls.ErrorDetails.KEY_LOAD_ERROR:\n            $(\"#HlsStatus\").text(\"error while loading key \" + data.frag.decryptdata.uri);\n            break;\n          case Hls.ErrorDetails.KEY_LOAD_TIMEOUT:\n            $(\"#HlsStatus\").text(\"timeout while loading key \" + data.frag.decryptdata.uri);\n            break;\n          case Hls.ErrorDetails.BUFFER_APPEND_ERROR:\n            $(\"#HlsStatus\").text(\"Buffer Append Error\");\n            break;\n          case Hls.ErrorDetails.BUFFER_ADD_CODEC_ERROR:\n            $(\"#HlsStatus\").text(\"Buffer Add Codec Error for \" + data.mimeType + \":\" + data.err.message);\n            break;\n          case Hls.ErrorDetails.BUFFER_APPENDING_ERROR:\n            $(\"#HlsStatus\").text(\"Buffer Appending Error\");\n            break;\n          default:\n            break;\n        }\n        if(data.fatal) {\n          console.log('fatal error :' + data.details);\n          switch(data.type) {\n            case Hls.ErrorTypes.MEDIA_ERROR:\n              handleMediaError();\n              break;\n            case Hls.ErrorTypes.NETWORK_ERROR:\n              $(\"#HlsStatus\").append(\",network error ...\");\n              break;\n            default:\n              $(\"#HlsStatus\").append(\", unrecoverable error\");\n              hls.destroy();\n              break;\n          }\n          console.log($(\"#HlsStatus\").text());\n        }\n        if(!stats) stats = {};\n        // track all errors independently\n        if (stats[data.details] === undefined) {\n          stats[data.details] = 1;\n        } else {\n          stats[data.details] += 1;\n        }\n        // track fatal error\n        if (data.fatal) {\n          if (stats.fatalError === undefined) {\n            stats.fatalError = 1;\n          } else {\n              stats.fatalError += 1;\n          }\n        }\n        $(\"#HlsStats\").text(JSON.stringify(sortObject(stats),null,\"\\t\"));\n       });\n\n       hls.on(Hls.Events.BUFFER_CREATED, function(event,data) {\n        tracks = data.tracks;\n       });\n\n        hls.on(Hls.Events.BUFFER_APPENDING, function(event,data) {\n          if (dumpfMP4) {\n            fmp4Data[data.type].push(data.data);\n          }\n        });\n\n       hls.on(Hls.Events.FPS_DROP,function(event,data) {\n          var evt = {time : performance.now() - events.t0, type : \"frame drop\", name : data.currentDropped + \"/\" + data.currentDecoded};\n          events.video.push(evt);\n          if (stats) {\n           if (stats.fpsDropEvent === undefined) {\n              stats.fpsDropEvent = 1;\n            } else {\n              stats.fpsDropEvent++;\n            }\n            stats.fpsTotalDroppedFrames = data.totalDroppedFrames;\n          }\n       });\n       video.addEventListener('resize', handleVideoEvent);\n       video.addEventListener('seeking', handleVideoEvent);\n       video.addEventListener('seeked', handleVideoEvent);\n       video.addEventListener('pause', handleVideoEvent);\n       video.addEventListener('play', handleVideoEvent);\n       video.addEventListener('canplay', handleVideoEvent);\n       video.addEventListener('canplaythrough', handleVideoEvent);\n       video.addEventListener('ended', handleVideoEvent);\n       video.addEventListener('playing', handleVideoEvent);\n       video.addEventListener('error', handleVideoEvent);\n       video.addEventListener('loadedmetadata', handleVideoEvent);\n       video.addEventListener('loadeddata', handleVideoEvent);\n       video.addEventListener('durationchange', handleVideoEvent);\n    } else {\n      if(navigator.userAgent.toLowerCase().indexOf('firefox') !== -1) {\n      $(\"#HlsStatus\").text(\"you are using Firefox, it looks like MediaSource is not enabled,<br>please ensure the following keys are set appropriately in <b>about:config</b><br>media.mediasource.enabled=true<br>media.mediasource.mp4.enabled=true<br><b>media.mediasource.whitelist=false</b>\");\n      } else {\n        $(\"#HlsStatus\").text(\"your Browser does not support MediaSourceExtension / MP4 mediasource\");\n      }\n    }\n  }\n\n\nvar lastSeekingIdx, lastStartPosition,lastDuration, lastAudioTrackSwitchingIdx;\n  function handleVideoEvent(evt) {\n    var data = '';\n    switch(evt.type) {\n       case 'durationchange':\n       if(evt.target.duration - lastDuration <= 0.5) {\n        // some browsers reports several duration change events with almost the same value ... avoid spamming video events\n        return;\n       }\n        lastDuration = evt.target.duration;\n         data = Math.round(evt.target.duration*1000);\n         break;\n      case 'resize':\n        data = evt.target.videoWidth + '/' + evt.target.videoHeight;\n        break;\n      case 'loadedmetadata':\n      //   data = 'duration:' + evt.target.duration + '/videoWidth:' + evt.target.videoWidth + '/videoHeight:' + evt.target.videoHeight;\n      //  break;\n      case 'loadeddata':\n      case 'canplay':\n      case 'canplaythrough':\n      case 'ended':\n      case 'seeking':\n      case 'seeked':\n      case 'play':\n      case 'playing':\n        lastStartPosition = evt.target.currentTime;\n      case 'pause':\n      case 'waiting':\n      case 'stalled':\n      case 'error':\n        data = Math.round(evt.target.currentTime*1000);\n        if(evt.type === 'error') {\n          var errorTxt,mediaError=evt.currentTarget.error;\n          switch(mediaError.code) {\n            case mediaError.MEDIA_ERR_ABORTED:\n               errorTxt = \"You aborted the video playback\";\n              break;\n            case mediaError.MEDIA_ERR_DECODE:\n              errorTxt = \"The video playback was aborted due to a corruption problem or because the video used features your browser did not support\";\n              handleMediaError();\n              break;\n            case mediaError.MEDIA_ERR_NETWORK:\n              errorTxt = \"A network error caused the video download to fail part-way\";\n              break;\n            case mediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:\n              errorTxt = \"The video could not be loaded, either because the server or network failed or because the format is not supported\";\n              break;\n          }\n          if (mediaError.message) {\n            errorTxt += ' - ' + mediaError.message;\n          }\n          $(\"#HlsStatus\").text(errorTxt);\n          console.error(errorTxt);\n        }\n        break;\n      // case 'progress':\n      //   data = 'currentTime:' + evt.target.currentTime + ',bufferRange:[' + this.video.buffered.start(0) + ',' + this.video.buffered.end(0) + ']';\n      //   break;\n      default:\n      break;\n    }\n    var event = {time : performance.now() - events.t0, type : evt.type, name : data};\n    events.video.push(event);\n    if(evt.type === 'seeking') {\n      lastSeekingIdx = events.video.length-1;\n    }\n    if(evt.type === 'seeked') {\n      events.video[lastSeekingIdx].duration = event.time - events.video[lastSeekingIdx].time;\n    }\n  }\n\n\nvar recoverDecodingErrorDate,recoverSwapAudioCodecDate;\nfunction handleMediaError() {\n  if(autoRecoverError) {\n    var now = performance.now();\n    if(!recoverDecodingErrorDate || (now - recoverDecodingErrorDate) > 3000) {\n      recoverDecodingErrorDate = performance.now();\n      $(\"#HlsStatus\").append(\",try to recover media Error ...\");\n      hls.recoverMediaError();\n    } else {\n      if(!recoverSwapAudioCodecDate || (now - recoverSwapAudioCodecDate) > 3000) {\n        recoverSwapAudioCodecDate = performance.now();\n        $(\"#HlsStatus\").append(\",try to swap Audio Codec and recover media Error ...\");\n        hls.swapAudioCodec();\n        hls.recoverMediaError();\n      } else {\n        $(\"#HlsStatus\").append(\",cannot recover, last media error recovery failed ...\");\n      }\n    }\n  }\n}\n\n\nfunction timeRangesToString(r) {\n  var log = \"\";\n  for (var i=0; i<r.length; i++) {\n    log += \"[\" + r.start(i) + \",\" + r.end(i) + \"]\";\n  }\n  return log;\n}\n\n  var bufferingIdx = -1;\n\n  function checkBuffer() {\n    var v = $('#video')[0];\n    var canvas = $('#buffered_c')[0];\n    var ctx = canvas.getContext('2d');\n    var r = v.buffered;\n    var bufferingDuration;\n    ctx.fillStyle = \"black\";\n    ctx.fillRect(0,0,canvas.width,canvas.height);\n    ctx.fillStyle = \"gray\";\n    if (r) {\n      if(!canvas.width || canvas.width !== v.clientWidth) {\n        canvas.width = v.clientWidth;\n      }\n      var pos = v.currentTime,bufferLen;\n      for (var i=0, bufferLen=0; i<r.length; i++) {\n        var start = r.start(i)/v.duration * canvas.width;\n        var end = r.end(i)/v.duration * canvas.width;\n        ctx.fillRect(start, 3, Math.max(2, end-start), 10);\n        if(pos >= r.start(i) && pos < r.end(i)) {\n          // play position is inside this buffer TimeRange, retrieve end of buffer position and buffer length\n          bufferLen = r.end(i) - pos;\n        }\n      }\n      // check if we are in buffering / or playback ended state\n      if(bufferLen <= 0.1 && v.paused === false && (pos-lastStartPosition) > 0.5) {\n        // don't create buffering event if we are at the end of the playlist, don't report ended for live playlist\n        if(lastDuration -pos <= 0.5  && events.isLive === false) {\n        } else {\n         // we are not at the end of the playlist ... real buffering\n          if(bufferingIdx !== -1) {\n            bufferingDuration = performance.now() - events.t0 - events.video[bufferingIdx].time;\n            events.video[bufferingIdx].duration = bufferingDuration;\n            events.video[bufferingIdx].name = bufferingDuration;\n          } else {\n            events.video.push({ type : 'buffering' , time : performance.now() - events.t0 });\n            // we are in buffering state\n            bufferingIdx = events.video.length-1;\n          }\n        }\n      }\n\n      if(bufferLen > 0.1 && bufferingIdx !=-1) {\n          bufferingDuration = performance.now() - events.t0 - events.video[bufferingIdx].time;\n          events.video[bufferingIdx].duration = bufferingDuration;\n          events.video[bufferingIdx].name = bufferingDuration;\n        // we are out of buffering state\n        bufferingIdx = -1;\n      }\n\n      // update buffer/position for current Time\n      var event = { time : performance.now() - events.t0, buffer : Math.round(bufferLen*1000), pos: Math.round(pos*1000)};\n      var bufEvents = events.buffer, bufEventLen = bufEvents.length;\n      if(bufEventLen > 1) {\n        var event0 = bufEvents[bufEventLen-2],event1 = bufEvents[bufEventLen-1];\n        var slopeBuf0 = (event0.buffer - event1.buffer)/(event0.time-event1.time);\n        var slopeBuf1 = (event1.buffer - event.buffer)/(event1.time-event.time);\n\n        var slopePos0 = (event0.pos - event1.pos)/(event0.time-event1.time);\n        var slopePos1 = (event1.pos - event.pos)/(event1.time-event.time);\n        // compute slopes. if less than 30% difference, remove event1\n        if((slopeBuf0 === slopeBuf1 || Math.abs(slopeBuf0/slopeBuf1 -1) <= 0.3) &&\n           (slopePos0 === slopePos1 || Math.abs(slopePos0/slopePos1 -1) <= 0.3))\n         {\n          bufEvents.pop();\n        }\n      }\n      events.buffer.push(event);\n      refreshCanvas();\n\n      var log = \"Duration:\"\n              + v.duration + \"<br>\"\n              + \"Buffered:\"\n              + timeRangesToString(v.buffered) + \"<br>\"\n              + \"Seekable:\"\n              + timeRangesToString(v.seekable) + \"<br>\"\n              + \"Played:\"\n              + timeRangesToString(v.played) + \"<br>\";\n\n      if (hls.media) {\n        for(var type in tracks) {\n          log += type + \" Buffered:\" + timeRangesToString(tracks[type].buffer.buffered) + \"<br>\";\n        }\n\n        var videoPlaybackQuality = v.getVideoPlaybackQuality;\n        if(videoPlaybackQuality && typeof(videoPlaybackQuality) === typeof(Function)) {\n          log+=\"Dropped Frames:\"+ v.getVideoPlaybackQuality().droppedVideoFrames + \"<br>\";\n          log+=\"Corrupted Frames:\"+ v.getVideoPlaybackQuality().corruptedVideoFrames + \"<br>\";\n        } else if(v.webkitDroppedFrameCount) {\n          log+=\"Dropped Frames:\"+ v.webkitDroppedFrameCount + \"<br>\";\n        }\n      }\n      $(\"#buffered_log\").html(log);\n      $(\"#HlsStats\").text(JSON.stringify(sortObject(stats),null,\"\\t\"));\n      ctx.fillStyle = \"blue\";\n      var x = v.currentTime / v.duration * canvas.width;\n      ctx.fillRect(x, 0, 2, 15);\n    }\n\n  }\n\n  function sortObject(obj) {\n    if(typeof obj !== 'object')\n        return obj\n    var temp = {};\n    var keys = [];\n    for(var key in obj)\n        keys.push(key);\n    keys.sort();\n    for(var index in keys)\n        temp[keys[index]] = sortObject(obj[keys[index]]);\n    return temp;\n  }\n\n\n  function showCanvas()  {\n      showMetrics();\n      $(\"#buffered_log\").show();\n      $(\"#buffered_c\").show();\n  }\n\n  function hideCanvas()  {\n      hideMetrics();\n      $(\"#buffered_log\").hide();\n      $(\"#buffered_c\").hide();\n  }\n\n  function getMetrics() {\n    var json = JSON.stringify(events);\n    var jsonpacked = jsonpack.pack(json);\n    console.log(\"packing JSON from \" + json.length + \" to \" + jsonpacked.length + \" bytes\");\n    return btoa(jsonpacked);\n  }\n\n  function copyMetricsToClipBoard() {\n    copyTextToClipboard(getMetrics());\n  }\n\n  function copyTextToClipboard(text) {\n    var textArea = document.createElement(\"textarea\");\n    textArea.value = text;\n    document.body.appendChild(textArea);\n    textArea.select();\n    try {\n      var successful = document.execCommand('copy');\n      var msg = successful ? 'successful' : 'unsuccessful';\n      console.log('Copying text command was ' + msg);\n    } catch (err) {\n      console.log('Oops, unable to copy');\n    }\n    document.body.removeChild(textArea);\n  }\n\n  function goToMetrics() {\n    var url = document.URL;\n    url = url.substr(0,url.lastIndexOf(\"/\")+1) + 'metrics.html';\n    console.log(url);\n    window.open(url,'_blank');\n  }\n\n  function goToMetricsPermaLink() {\n    var url = document.URL;\n    var b64 = getMetrics();\n    url = url.substr(0,url.lastIndexOf(\"/\")+1) + 'metrics.html#data=' + b64;\n    console.log(url);\n    window.open(url,'_blank');\n  }\n\n  function minsecs(ts) {\n    var m = Math.floor(Math.floor(ts % 3600) / 60);\n    var s = Math.floor(ts % 60);\n    return m + \":\" + (s < 10 ? \"0\" : \"\") + s;\n  }\n\n  function buffered_seek(event) {\n    var canvas = $(\"#buffered_c\")[0];\n    var v = $('#video')[0];\n    var target = (event.clientX - canvas.offsetLeft) / canvas.width * v.duration;\n    v.currentTime = target;\n  }\n\n  function updateLevelInfo() {\n\n    if (!hls.levels) {\n      return;\n    }\n\n    var button_template = '<button type=\"button\" class=\"btn btn-sm ';\n    var button_enabled  = 'btn-primary\" ';\n    var button_disabled = 'btn-success\" ';\n\n    var html1 = button_template;\n    if(hls.autoLevelEnabled) {\n      html1 += button_enabled;\n    } else {\n      html1 += button_disabled;\n    }\n    html1 += 'onclick=\"hls.currentLevel=-1\">auto</button>';\n\n\n    var html2 = button_template;\n    if(hls.autoLevelEnabled) {\n      html2 += button_enabled;\n    } else {\n      html2 += button_disabled;\n    }\n    html2 += 'onclick=\"hls.loadLevel=-1\">auto</button>';\n\n    var html3 = button_template;\n    if(hls.autoLevelCapping === -1) {\n      html3 += button_enabled;\n    } else {\n      html3 += button_disabled;\n    }\n    html3 += 'onclick=\"levelCapping=hls.autoLevelCapping=-1;updateLevelInfo();updatePermalink();\">auto</button>';\n\n    var html4 = button_template;\n    if(hls.autoLevelEnabled) {\n      html4 += button_enabled;\n    } else {\n      html4 += button_disabled;\n    }\n    html4 += 'onclick=\"hls.nextLevel=-1\">auto</button>';\n\n    for (var i=0; i < hls.levels.length; i++) {\n      html1 += button_template;\n      if(hls.currentLevel === i) {\n        html1 += button_enabled;\n      } else {\n        html1 += button_disabled;\n      }\n      var levelName = i, label = level2label(i);\n      if(label) {\n        levelName += '(' + level2label(i) + ')';\n      }\n      html1 += 'onclick=\"hls.currentLevel=' + i + '\">' + levelName + '</button>';\n\n      html2 += button_template;\n      if(hls.loadLevel === i) {\n        html2 += button_enabled;\n      } else {\n        html2 += button_disabled;\n      }\n      html2 += 'onclick=\"hls.loadLevel=' + i + '\">' + levelName + '</button>';\n\n      html3 += button_template;\n      if(hls.autoLevelCapping === i) {\n        html3 += button_enabled;\n      } else {\n        html3 += button_disabled;\n      }\n      html3 += 'onclick=\"levelCapping=hls.autoLevelCapping=' + i + ';updateLevelInfo();updatePermalink();\">' + levelName + '</button>';\n\n      html4 += button_template;\n      if(hls.nextLevel === i) {\n        html4 += button_enabled;\n      } else {\n        html4 += button_disabled;\n      }\n      html4 += 'onclick=\"hls.nextLevel=' + i + '\">' + levelName + '</button>';\n    }\n    var v = $('#video')[0];\n    if(v.videoWidth) {\n      $(\"#currentResolution\").html(\"video resolution:\" + v.videoWidth + 'x' + v.videoHeight);\n    }\n    if($(\"#currentLevelControl\").html() != html1) {\n      $(\"#currentLevelControl\").html(html1);\n    }\n\n    if($(\"#loadLevelControl\").html() != html2) {\n      $(\"#loadLevelControl\").html(html2);\n    }\n\n    if($(\"#levelCappingControl\").html() != html3) {\n      $(\"#levelCappingControl\").html(html3);\n    }\n\n    if($(\"#nextLevelControl\").html() != html4) {\n      $(\"#nextLevelControl\").html(html4);\n    }\n  }\n\nfunction updateAudioTrackInfo() {\n    var button_template = '<button type=\"button\" class=\"btn btn-sm ';\n    var button_enabled  = 'btn-primary\" ';\n    var button_disabled = 'btn-success\" ';\n    var html1 = '';\n    var audioTrackId = hls.audioTrack, len = hls.audioTracks.length;\n\n    for (var i=0; i < len; i++) {\n      html1 += button_template;\n      if(audioTrackId === i) {\n        html1 += button_enabled;\n      } else {\n        html1 += button_disabled;\n      }\n      html1 += 'onclick=\"hls.audioTrack=' + i + '\">' + hls.audioTracks[i].name + '</button>';\n    }\n    $(\"#audioTrackControl\").html(html1);\n  }\n\n\n  function level2label(index) {\n    if(hls && hls.levels.length-1 >= index) {\n      var level = hls.levels[index];\n      if (level.name) {\n          return level.name;\n      } else {\n          if (level.height) {\n              return(level.height + 'p / ' + Math.round(level.bitrate / 1024) + 'kb');\n          } else {\n              if(level.bitrate) {\n                return(Math.round(level.bitrate / 1024) + 'kb');\n              } else {\n                return null;\n              }\n          }\n      }\n    }\n  }\n\n  function getURLParam(sParam, defaultValue) {\n    var sPageURL = window.location.search.substring(1);\n    var sURLVariables = sPageURL.split('&');\n    for (var i = 0; i < sURLVariables.length; i++) {\n      var sParameterName = sURLVariables[i].split('=');\n      if (sParameterName[0] == sParam) {\n        return \"undefined\" == sParameterName[1] ? undefined : \"false\" == sParameterName[1] ? false : sParameterName[1];\n      }\n    }\n    return defaultValue;\n  }\n\n  function updatePermalink() {\n      var url = $('#streamURL').val();\n      var hlsLink = document.URL.split('?')[0] +  '?src=' + encodeURIComponent(url) +\n                    '&enableStreaming=' + enableStreaming +\n                    '&autoRecoverError=' + autoRecoverError +\n                    '&enableWorker=' + enableWorker +\n                    '&dumpfMP4=' + dumpfMP4 +\n                    '&levelCapping=' + levelCapping +\n                    '&defaultAudioCodec=' + defaultAudioCodec;\n      var description = 'permalink: ' + \"<a href=\\\"\" + hlsLink + \"\\\">\" + hlsLink + \"</a>\";\n      $(\"#StreamPermalink\").html(description);\n  }\n\nfunction createfMP4(type) {\n  if (fmp4Data[type].length) {\n    var blob = new Blob([arrayConcat(fmp4Data[type])], {type: 'application/octet-stream'});\n    var filename = type + '-' + new Date().toISOString() + '.mp4';\n    saveAs(blob,filename);\n    //$('body').append('<a download=\"hlsjs-' + filename + '\" href=\"' + window.URL.createObjectURL(blob) + '\">Download ' + filename + ' track</a><br>');\n  }\n}\n\nfunction arrayConcat(inputArray) {\n    var totalLength = inputArray.reduce( function(prev,cur) { return prev+cur.length} ,0);\n    var result = new Uint8Array(totalLength);\n    var offset = 0;\n    inputArray.forEach(function(element) {\n      result.set(element, offset);\n      offset += element.length;\n    });\n    return result;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./demo/index.js"],"sourceRoot":""}